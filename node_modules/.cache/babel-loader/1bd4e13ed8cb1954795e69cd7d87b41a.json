{"ast":null,"code":"var _jsxFileName = \"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/src/Pages/Login.js\";\nimport React, { Component } from \"react\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\nimport { API } from \"../libs/API\";\nimport { getUser } from \"../redux/actions/authActions\";\nimport { connect } from \"react-redux\";\nimport LoginForm from \"../components/Forms/LoginForm\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.clearInput = () => {\n      const inputEl = document.querySelectorAll(\".inputField\");\n      inputEl.forEach(el => {\n        // console.log(el);\n        el.value = '';\n      }); // console.log(inputEl);\n    };\n\n    this.handleLogin = values => {\n      console.log('values', values);\n      API.post('oauth/token', {\n        'grant_type': 'password',\n        'client_id': 2,\n        'client_secret': 'iwrHFPcaiQ3bZTzHEwQpYkpiuHUlbIOJ9SAI6DLI',\n        \"username\": values.LOGIN_email,\n        \"password\": values.LOGIN_password\n      }).then(response => {\n        window.localStorage.setItem('_DEMO_TOKEN', response.data.access_token);\n        console.log('post', response.data.access_token); // Object.assign(API.defaults, {\n        //   headers: { authorization: 'Bearer' + response.data.access_token}\n        // })\n\n        API.defaults.headers.common[\"Authorization\"] = \"Bearer \" + response.data.access_token;\n        API.get(\"/api/posts\").then(response => {\n          console.log(response);\n        }); // De header wordt ingesteld hierboven. Daarna kunnen de gegevens worden opgehaald\n\n        this.props.getUserInfo();\n      }); //END of .then()\n    };\n  }\n\n  render() {\n    console.log('props uit login', this.props);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Formik, {\n      onSubmit: this.handleLogin,\n      initialValues: {\n        LOGIN_email: \"\",\n        LOGIN_password: \"\"\n      } // Check for password validation\n      ,\n      validationSchema: Yup.object({\n        LOGIN_email: Yup.string().required(\"required\"),\n        LOGIN_password: Yup.string() // .matches(\n        //   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&])$/,\n        //   \"Must contain at least 1 cap, 1 digit & 1 spec char\"\n        // )\n        .min(8).required(\"required\")\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, props => /*#__PURE__*/React.createElement(LoginForm, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  userInfo: state.auth\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getUserInfo: () => dispatch(getUser)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/src/Pages/Login.js"],"names":["React","Component","Formik","Field","Form","ErrorMessage","Yup","API","getUser","connect","LoginForm","Login","clearInput","inputEl","document","querySelectorAll","forEach","el","value","handleLogin","values","console","log","post","LOGIN_email","LOGIN_password","then","response","window","localStorage","setItem","data","access_token","defaults","headers","common","get","props","getUserInfo","render","object","string","required","min","mapStateToProps","state","userInfo","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\nimport { API } from \"../libs/API\";\nimport { getUser } from \"../redux/actions/authActions\"\nimport {connect} from \"react-redux\"\nimport LoginForm from \"../components/Forms/LoginForm\";\n\n\n\nclass Login extends Component {  \n\n  clearInput = () => {\n    const inputEl = document.querySelectorAll(\".inputField\");\n    inputEl.forEach((el) => {\n      // console.log(el);\n      el.value = ''\n    });\n    // console.log(inputEl);\n  };\n\n  handleLogin = (values) => {\n    console.log('values', values)\n    \n    API.post('oauth/token', {\n            'grant_type': 'password',\n            'client_id': 2,\n            'client_secret': 'iwrHFPcaiQ3bZTzHEwQpYkpiuHUlbIOJ9SAI6DLI',\n            \"username\": values.LOGIN_email,\n            \"password\": values.LOGIN_password\n    }).then(response => {\n      window.localStorage.setItem('_DEMO_TOKEN', response.data.access_token)\n      console.log('post',response.data.access_token)\n\n      // Object.assign(API.defaults, {\n      //   headers: { authorization: 'Bearer' + response.data.access_token}\n      // })\n\n      API.defaults.headers.common[\"Authorization\"] =\n          \"Bearer \" + response.data.access_token;\n          \n      API.get(\"/api/posts\").then((response) => {\n        console.log(response);\n      });\n\n      // De header wordt ingesteld hierboven. Daarna kunnen de gegevens worden opgehaald\n      this.props.getUserInfo();\n\n      \n    }) //END of .then()\n\n    \n  };\n\n  render() {\n    console.log('props uit login', this.props)\n    return (\n      <div>\n        <Formik\n          onSubmit={this.handleLogin}\n          initialValues={{\n            LOGIN_email: \"\",\n            LOGIN_password: \"\"\n          }}\n          // Check for password validation\n          validationSchema={Yup.object({\n            LOGIN_email: Yup.string().required(\"required\"),\n\n            LOGIN_password: Yup.string()\n              // .matches(\n              //   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&])$/,\n              //   \"Must contain at least 1 cap, 1 digit & 1 spec char\"\n              // )\n              .min(8)\n              .required(\"required\"),\n          })}\n        >\n\n          {/* <Form>\n            <Formgroup\n              type=\"email\"\n              typeOfInfo=\"LOGIN_email\"\n              title=\"Email\"\n            />\n\n            <Formgroup \n              type=\"password\" \n              typeOfInfo=\"LOGIN_password\" \n              title=\"Password\" \n            />\n\n            <button type=\"submit\">Login</button>\n          </Form> */}\n\n          {props => <LoginForm {...props} />}\n        </Formik>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n    userInfo: state.auth\n})\n\nconst mapDispatchToProps = dispatch => ({\n  getUserInfo : () => dispatch(getUser)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n"]},"metadata":{},"sourceType":"module"}