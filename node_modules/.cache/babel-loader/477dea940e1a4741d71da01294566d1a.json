{"ast":null,"code":"import _classCallCheck from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Formik}from\"formik\";import*as Yup from\"yup\";import{API}from\"../libs/API\";import{getUser}from\"../redux/actions/authActions\";import{connect}from\"react-redux\";import LoginForm from\"../components/Forms/LoginForm\";import{Redirect}from\"react-router-dom\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={redirect:false};_this.clearInput=function(){var inputEl=document.querySelectorAll(\".inputField\");inputEl.forEach(function(el){el.value='';});};_this.handleLogin=function(values){API.post('oauth/token',{'grant_type':'password','client_id':2,'client_secret':'iwrHFPcaiQ3bZTzHEwQpYkpiuHUlbIOJ9SAI6DLI',\"username\":values.LOGIN_email,\"password\":values.LOGIN_password}).then(function(response){window.localStorage.setItem('_DEMO_TOKEN',response.data.access_token);API.defaults.headers.common[\"Authorization\"]=\"Bearer \"+response.data.access_token;API.get(\"/api/posts\").then(function(response){});// De header wordt ingesteld hierboven. Daarna kunnen de gegevens worden opgehaald\n_this.props.getUserInfo();_this.setState({redirect:true});});//END of .then()\n};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,!this.state.redirect?/*#__PURE__*/React.createElement(Formik,{onSubmit:this.handleLogin,initialValues:{LOGIN_email:\"\",LOGIN_password:\"\"}// Check for password validation\n,validationSchema:Yup.object({LOGIN_email:Yup.string().required(\"required\"),LOGIN_password:Yup.string()// .matches(\n//   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&])$/,\n//   \"Must contain at least 1 cap, 1 digit & 1 spec char\"\n// )\n.min(8).required(\"required\")})},function(props){return/*#__PURE__*/React.createElement(LoginForm,props);}):/*#__PURE__*/React.createElement(Redirect,{to:'/overview/1'}));}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(state){return{userInfo:state.auth};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getUserInfo:function getUserInfo(){return dispatch(getUser);}};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/src/Pages/Login.js"],"names":["React","Component","Formik","Yup","API","getUser","connect","LoginForm","Redirect","Login","state","redirect","clearInput","inputEl","document","querySelectorAll","forEach","el","value","handleLogin","values","post","LOGIN_email","LOGIN_password","then","response","window","localStorage","setItem","data","access_token","defaults","headers","common","get","props","getUserInfo","setState","object","string","required","min","mapStateToProps","userInfo","auth","mapDispatchToProps","dispatch"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAASC,OAAT,KAAwB,8BAAxB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,GAIMC,CAAAA,K,uTACJC,K,CAAQ,CACNC,QAAQ,CAAE,KADJ,C,OAIRC,U,CAAa,UAAM,CACjB,GAAMC,CAAAA,OAAO,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,CAAhB,CACAF,OAAO,CAACG,OAAR,CAAgB,SAACC,EAAD,CAAQ,CACtBA,EAAE,CAACC,KAAH,CAAW,EAAX,CACD,CAFD,EAGD,C,OAEDC,W,CAAc,SAACC,MAAD,CAAY,CAExBhB,GAAG,CAACiB,IAAJ,CAAS,aAAT,CAAwB,CAChB,aAAc,UADE,CAEhB,YAAa,CAFG,CAGhB,gBAAiB,0CAHD,CAIhB,WAAYD,MAAM,CAACE,WAJH,CAKhB,WAAYF,MAAM,CAACG,cALH,CAAxB,EAMGC,IANH,CAMQ,SAAAC,QAAQ,CAAI,CAClBC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAA2CH,QAAQ,CAACI,IAAT,CAAcC,YAAzD,EAEA1B,GAAG,CAAC2B,QAAJ,CAAaC,OAAb,CAAqBC,MAArB,CAA4B,eAA5B,EACI,UAAYR,QAAQ,CAACI,IAAT,CAAcC,YAD9B,CAGA1B,GAAG,CAAC8B,GAAJ,CAAQ,YAAR,EAAsBV,IAAtB,CAA2B,SAACC,QAAD,CAAc,CACxC,CADD,EAGA;AACA,MAAKU,KAAL,CAAWC,WAAX,GAEA,MAAKC,QAAL,CAAc,CAAC1B,QAAQ,CAAE,IAAX,CAAd,EAED,CApBD,EAoBG;AACJ,C,wEAEQ,CACP,mBAEE,+BACG,CAAC,KAAKD,KAAL,CAAWC,QAAZ,cAAuB,oBAAC,MAAD,EACtB,QAAQ,CAAE,KAAKQ,WADO,CAEtB,aAAa,CAAE,CACbG,WAAW,CAAE,EADA,CAEbC,cAAc,CAAE,EAFH,CAIf;AANsB,CAOtB,gBAAgB,CAAEpB,GAAG,CAACmC,MAAJ,CAAW,CAC3BhB,WAAW,CAAEnB,GAAG,CAACoC,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CADc,CAG3BjB,cAAc,CAAEpB,GAAG,CAACoC,MAAJ,EACd;AACA;AACA;AACA;AAJc,CAKbE,GALa,CAKT,CALS,EAMbD,QANa,CAMJ,UANI,CAHW,CAAX,CAPI,EAoBrB,SAAAL,KAAK,qBAAI,oBAAC,SAAD,CAAeA,KAAf,CAAJ,EApBgB,CAAvB,cAqBW,oBAAC,QAAD,EAAU,EAAE,CAAE,aAAd,EAtBd,CAFF,CA4BD,C,mBAlEiBlC,S,EAqEpB,GAAMyC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAChC,KAAD,QAAY,CAChCiC,QAAQ,CAAEjC,KAAK,CAACkC,IADgB,CAAZ,EAAxB,CAIA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACtCV,WAAW,CAAG,6BAAMU,CAAAA,QAAQ,CAACzC,OAAD,CAAd,EADwB,CAAL,EAAnC,CAIA,cAAeC,CAAAA,OAAO,CAACoC,eAAD,CAAkBG,kBAAlB,CAAP,CAA6CpC,KAA7C,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { API } from \"../libs/API\";\nimport { getUser } from \"../redux/actions/authActions\"\nimport {connect} from \"react-redux\"\nimport LoginForm from \"../components/Forms/LoginForm\";\nimport { Redirect } from \"react-router-dom\";\n\n\n\nclass Login extends Component {  \n  state = {\n    redirect: false\n  }\n\n  clearInput = () => {\n    const inputEl = document.querySelectorAll(\".inputField\");\n    inputEl.forEach((el) => {\n      el.value = ''\n    });\n  };\n\n  handleLogin = (values) => {\n    \n    API.post('oauth/token', {\n            'grant_type': 'password',\n            'client_id': 2,\n            'client_secret': 'iwrHFPcaiQ3bZTzHEwQpYkpiuHUlbIOJ9SAI6DLI',\n            \"username\": values.LOGIN_email,\n            \"password\": values.LOGIN_password\n    }).then(response => {\n      window.localStorage.setItem('_DEMO_TOKEN', response.data.access_token)\n\n      API.defaults.headers.common[\"Authorization\"] =\n          \"Bearer \" + response.data.access_token;\n          \n      API.get(\"/api/posts\").then((response) => {\n      });\n\n      // De header wordt ingesteld hierboven. Daarna kunnen de gegevens worden opgehaald\n      this.props.getUserInfo();\n\n      this.setState({redirect: true})\n      \n    }) //END of .then()\n  };\n\n  render() {\n    return (\n      \n      <div>\n        {!this.state.redirect ? <Formik\n          onSubmit={this.handleLogin}\n          initialValues={{\n            LOGIN_email: \"\",\n            LOGIN_password: \"\"\n          }}\n          // Check for password validation\n          validationSchema={Yup.object({\n            LOGIN_email: Yup.string().required(\"required\"),\n\n            LOGIN_password: Yup.string()\n              // .matches(\n              //   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&])$/,\n              //   \"Must contain at least 1 cap, 1 digit & 1 spec char\"\n              // )\n              .min(8)\n              .required(\"required\"),\n          })}\n        >\n\n          {props => <LoginForm {...props} />}\n        </Formik> : <Redirect to={'/overview/1'}/>}\n        \n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n    userInfo: state.auth\n})\n\nconst mapDispatchToProps = dispatch => ({\n  getUserInfo : () => dispatch(getUser)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n"]},"metadata":{},"sourceType":"module"}