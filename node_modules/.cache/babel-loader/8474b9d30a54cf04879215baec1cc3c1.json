{"ast":null,"code":"import _classCallCheck from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import moment from\"moment\";import{Link}from\"react-router-dom\";import{useStore,connect}from\"react-redux\";import commentIcon from\"../assets/icons/comment.png\";import commentIconDark from\"../assets/icons/comment-icon-dark.png\";import Time from\"./Time\";import Button from\"./Button\";import Userinfo from\"./Userinfo\";import{API}from\"../libs/API\";import{showParticularPost,deletePost,fetchPost}from'../redux/actions/postsActions';var Blogpost=/*#__PURE__*/function(_Component){_inherits(Blogpost,_Component);var _super=_createSuper(Blogpost);function Blogpost(){var _this;_classCallCheck(this,Blogpost);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.deletePost=function(id){API.delete(\"/api/posts/\".concat(id)).then(function(response){console.log(response);});};return _this;}_createClass(Blogpost,[{key:\"render\",value:function render(){var _this2=this;var _this$props$postDetai=this.props.postDetail,body=_this$props$postDetai.body,comments_count=_this$props$postDetai.comments_count,created_at=_this$props$postDetai.created_at,id=_this$props$postDetai.id,title=_this$props$postDetai.title,updated_at=_this$props$postDetai.updated_at,user=_this$props$postDetai.user,userId=_this$props$postDetai.user_id;var auth=this.props.auth;console.log('auth in blogpost',auth);console.log(this.props);return/*#__PURE__*/React.createElement(\"div\",{className:\"blogpost m-2\"},/*#__PURE__*/React.createElement(\"article\",null,/*#__PURE__*/React.createElement(Time,{created_at:created_at,exactTime:true}),/*#__PURE__*/React.createElement(\"h1\",{dangerouslySetInnerHTML:{__html:title}}),/*#__PURE__*/React.createElement(\"div\",{className:\"body-txt\",dangerouslySetInnerHTML:{__html:body}}),/*#__PURE__*/React.createElement(Time,{created_at:created_at})),/*#__PURE__*/React.createElement(\"aside\",{className:\"m-3 p-3\"},/*#__PURE__*/React.createElement(Userinfo,{userId:userId,imgUrl:{avatar:user.avatar,avatar_class:\"grid__item--img\"},firstName:user.first_name,lastName:user.last_name}),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"img\",{src:commentIconDark,alt:\"\",className:\"comment-icon\"}),comments_count,\" comments\"),auth.user!=='not set'&&/*#__PURE__*/React.createElement(Button,{btnText:\"ADD COMMENT\",url:\"/postdetail/\".concat(id),ref:'#comment-editor'})||auth.user==='not set'&&/*#__PURE__*/React.createElement(Button,{btnText:'ADD COMMENT (to disable)',CSS:\"disabled\",type:\"button\",disabled:true}),/*#__PURE__*/React.createElement(Button,{btnText:\"SEE DETAILS\",url:\"/postdetail/\".concat(id)})),auth.payload&&auth.payload.id===userId&&/*#__PURE__*/React.createElement(Button,{btnText:\"Edit Post\",url:\"/edit-post/\".concat(id)}),auth.payload&&auth.payload.id===userId&&/*#__PURE__*/React.createElement(Button,{btnText:\"Delete Post\",func:function func(){return _this2.props.delete(id);}}));}}]);return Blogpost;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{delete:function _delete(id){return dispatch(deletePost(id));},showDetail:function showDetail(postId){return dispatch(showParticularPost(postId));}};};export default connect(mapStateToProps,mapDispatchToProps)(Blogpost);","map":{"version":3,"sources":["/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/src/components/Blogpost.js"],"names":["React","Component","moment","Link","useStore","connect","commentIcon","commentIconDark","Time","Button","Userinfo","API","showParticularPost","deletePost","fetchPost","Blogpost","id","delete","then","response","console","log","props","postDetail","body","comments_count","created_at","title","updated_at","user","userId","user_id","auth","__html","avatar","avatar_class","first_name","last_name","payload","mapStateToProps","state","mapDispatchToProps","dispatch","showDetail","postId"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\nimport { useStore, connect } from \"react-redux\";\nimport commentIcon from \"../assets/icons/comment.png\";\nimport commentIconDark from \"../assets/icons/comment-icon-dark.png\";\nimport Time from \"./Time\";\nimport Button from \"./Button\";\nimport Userinfo from \"./Userinfo\";\nimport { API } from \"../libs/API\";\nimport {showParticularPost, deletePost, fetchPost} from '../redux/actions/postsActions'\n\nclass Blogpost extends Component {\n  deletePost = id => {\n    API.delete(`/api/posts/${id}`).then(\n      response => {\n        console.log(response) \n      }\n    )\n  }\n\n  render() {\n    const {\n      body,\n      comments_count,\n      created_at,\n      id,\n      title,\n      updated_at,\n      user,\n      user_id: userId,\n    } = this.props.postDetail;\n\n    const {auth} = this.props\n\n    console.log('auth in blogpost', auth)\n    console.log(this.props)\n\n    return (\n      <div className=\"blogpost m-2\">\n        <article>\n          <Time created_at={created_at} exactTime={true} />\n          <h1 dangerouslySetInnerHTML={{ __html: title }}></h1>\n          <div\n            className=\"body-txt\"\n            dangerouslySetInnerHTML={{ __html: body }}\n          ></div>\n          <Time created_at={created_at} />\n        </article>\n\n        <aside className='m-3 p-3'>\n           <Userinfo \n            userId={userId}\n            imgUrl={{avatar: user.avatar, avatar_class: \"grid__item--img\"}}\n            firstName={user.first_name}\n            lastName={user.last_name}/>\n          <p>\n            <img src={commentIconDark} alt=\"\" className=\"comment-icon\" />\n            {comments_count} comments\n          </p>\n\n\n          {\n          (auth.user !== 'not set' && <Button btnText={`ADD COMMENT`} url={`/postdetail/${id}`} ref={'#comment-editor'}/>) ||\n          \n          (auth.user === 'not set' && <Button btnText={'ADD COMMENT (to disable)'} CSS=\"disabled\" type='button' disabled/>)\n        }\n\n          <Button btnText={`SEE DETAILS`} url={`/postdetail/${id}`}/>\n\n        </aside>\n\n\n        {auth.payload && auth.payload.id === userId && <Button btnText=\"Edit Post\" url={`/edit-post/${id}`}/> }\n        {auth.payload && auth.payload.id === userId && <Button btnText=\"Delete Post\" func={()=>this.props.delete(id)}/> }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => (\n  {auth: state.auth}\n)\n\nconst mapDispatchToProps = dispatch => ({\n  delete: (id) => dispatch(deletePost(id)),\n  showDetail: postId => dispatch(showParticularPost(postId))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Blogpost)"]},"metadata":{},"sourceType":"module"}