{"ast":null,"code":"import _classCallCheck from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Formik,Field,Form,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import{API}from\"../libs/API\";import{getUser}from\"../redux/actions/authActions\";import{connect}from\"react-redux\";import LoginForm from\"../components/Forms/LoginForm\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.clearInput=function(){var inputEl=document.querySelectorAll(\".inputField\");inputEl.forEach(function(el){// console.log(el);\nel.value='';});// console.log(inputEl);\n};_this.handleLogin=function(values){console.log('values',values);API.post('oauth/token',{'grant_type':'password','client_id':2,'client_secret':'iwrHFPcaiQ3bZTzHEwQpYkpiuHUlbIOJ9SAI6DLI',\"username\":values.LOGIN_email,\"password\":values.LOGIN_password}).then(function(response){window.localStorage.setItem('_DEMO_TOKEN',response.data.access_token);console.log('post',response.data.access_token);// Object.assign(API.defaults, {\n//   headers: { authorization: 'Bearer' + response.data.access_token}\n// })\nAPI.defaults.headers.common[\"Authorization\"]=\"Bearer \"+response.data.access_token;API.get(\"/api/posts\").then(function(response){console.log(response);});// De header wordt ingesteld hierboven. Daarna kunnen de gegevens worden opgehaald\n_this.props.getUserInfo();});//END of .then()\n};return _this;}_createClass(Login,[{key:\"render\",value:function render(){console.log('props uit login',this.props);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Formik,{onSubmit:this.handleLogin,initialValues:{LOGIN_email:\"\",LOGIN_password:\"\"}// Check for password validation\n,validationSchema:Yup.object({LOGIN_email:Yup.string().required(\"required\"),LOGIN_password:Yup.string()// .matches(\n//   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&])$/,\n//   \"Must contain at least 1 cap, 1 digit & 1 spec char\"\n// )\n.min(8).required(\"required\")})},function(props){return/*#__PURE__*/React.createElement(LoginForm,props);}));}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(state){return{userInfo:state.auth};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getUserInfo:function getUserInfo(){return dispatch(getUser);}};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/kevinvanantwerpen/Documents/Eindwerk Syntra 2020/src/Pages/Login.js"],"names":["React","Component","Formik","Field","Form","ErrorMessage","Yup","API","getUser","connect","LoginForm","Login","clearInput","inputEl","document","querySelectorAll","forEach","el","value","handleLogin","values","console","log","post","LOGIN_email","LOGIN_password","then","response","window","localStorage","setItem","data","access_token","defaults","headers","common","get","props","getUserInfo","object","string","required","min","mapStateToProps","state","userInfo","auth","mapDispatchToProps","dispatch"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,IAAxB,CAA8BC,YAA9B,KAAkD,QAAlD,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAASC,OAAT,KAAwB,8BAAxB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,C,GAIMC,CAAAA,K,uTAEJC,U,CAAa,UAAM,CACjB,GAAMC,CAAAA,OAAO,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,CAAhB,CACAF,OAAO,CAACG,OAAR,CAAgB,SAACC,EAAD,CAAQ,CACtB;AACAA,EAAE,CAACC,KAAH,CAAW,EAAX,CACD,CAHD,EAIA;AACD,C,OAEDC,W,CAAc,SAACC,MAAD,CAAY,CACxBC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBF,MAAtB,EAEAb,GAAG,CAACgB,IAAJ,CAAS,aAAT,CAAwB,CAChB,aAAc,UADE,CAEhB,YAAa,CAFG,CAGhB,gBAAiB,0CAHD,CAIhB,WAAYH,MAAM,CAACI,WAJH,CAKhB,WAAYJ,MAAM,CAACK,cALH,CAAxB,EAMGC,IANH,CAMQ,SAAAC,QAAQ,CAAI,CAClBC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAA2CH,QAAQ,CAACI,IAAT,CAAcC,YAAzD,EACAX,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAmBK,QAAQ,CAACI,IAAT,CAAcC,YAAjC,EAEA;AACA;AACA;AAEAzB,GAAG,CAAC0B,QAAJ,CAAaC,OAAb,CAAqBC,MAArB,CAA4B,eAA5B,EACI,UAAYR,QAAQ,CAACI,IAAT,CAAcC,YAD9B,CAGAzB,GAAG,CAAC6B,GAAJ,CAAQ,YAAR,EAAsBV,IAAtB,CAA2B,SAACC,QAAD,CAAc,CACvCN,OAAO,CAACC,GAAR,CAAYK,QAAZ,EACD,CAFD,EAIA;AACA,MAAKU,KAAL,CAAWC,WAAX,GAGD,CAzBD,EAyBG;AAGJ,C,wEAEQ,CACPjB,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+B,KAAKe,KAApC,EACA,mBACE,4CACE,oBAAC,MAAD,EACE,QAAQ,CAAE,KAAKlB,WADjB,CAEE,aAAa,CAAE,CACbK,WAAW,CAAE,EADA,CAEbC,cAAc,CAAE,EAFH,CAIf;AANF,CAOE,gBAAgB,CAAEnB,GAAG,CAACiC,MAAJ,CAAW,CAC3Bf,WAAW,CAAElB,GAAG,CAACkC,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CADc,CAG3BhB,cAAc,CAAEnB,GAAG,CAACkC,MAAJ,EACd;AACA;AACA;AACA;AAJc,CAKbE,GALa,CAKT,CALS,EAMbD,QANa,CAMJ,UANI,CAHW,CAAX,CAPpB,EAoCG,SAAAJ,KAAK,qBAAI,oBAAC,SAAD,CAAeA,KAAf,CAAJ,EApCR,CADF,CADF,CA0CD,C,mBAxFiBpC,S,EA2FpB,GAAM0C,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,QAAY,CAChCC,QAAQ,CAAED,KAAK,CAACE,IADgB,CAAZ,EAAxB,CAIA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACtCV,WAAW,CAAG,6BAAMU,CAAAA,QAAQ,CAACxC,OAAD,CAAd,EADwB,CAAL,EAAnC,CAIA,cAAeC,CAAAA,OAAO,CAACkC,eAAD,CAAkBI,kBAAlB,CAAP,CAA6CpC,KAA7C,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\nimport { API } from \"../libs/API\";\nimport { getUser } from \"../redux/actions/authActions\"\nimport {connect} from \"react-redux\"\nimport LoginForm from \"../components/Forms/LoginForm\";\n\n\n\nclass Login extends Component {  \n\n  clearInput = () => {\n    const inputEl = document.querySelectorAll(\".inputField\");\n    inputEl.forEach((el) => {\n      // console.log(el);\n      el.value = ''\n    });\n    // console.log(inputEl);\n  };\n\n  handleLogin = (values) => {\n    console.log('values', values)\n    \n    API.post('oauth/token', {\n            'grant_type': 'password',\n            'client_id': 2,\n            'client_secret': 'iwrHFPcaiQ3bZTzHEwQpYkpiuHUlbIOJ9SAI6DLI',\n            \"username\": values.LOGIN_email,\n            \"password\": values.LOGIN_password\n    }).then(response => {\n      window.localStorage.setItem('_DEMO_TOKEN', response.data.access_token)\n      console.log('post',response.data.access_token)\n\n      // Object.assign(API.defaults, {\n      //   headers: { authorization: 'Bearer' + response.data.access_token}\n      // })\n\n      API.defaults.headers.common[\"Authorization\"] =\n          \"Bearer \" + response.data.access_token;\n          \n      API.get(\"/api/posts\").then((response) => {\n        console.log(response);\n      });\n\n      // De header wordt ingesteld hierboven. Daarna kunnen de gegevens worden opgehaald\n      this.props.getUserInfo();\n\n      \n    }) //END of .then()\n\n    \n  };\n\n  render() {\n    console.log('props uit login', this.props)\n    return (\n      <div>\n        <Formik\n          onSubmit={this.handleLogin}\n          initialValues={{\n            LOGIN_email: \"\",\n            LOGIN_password: \"\"\n          }}\n          // Check for password validation\n          validationSchema={Yup.object({\n            LOGIN_email: Yup.string().required(\"required\"),\n\n            LOGIN_password: Yup.string()\n              // .matches(\n              //   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$^+=!*()@%&])$/,\n              //   \"Must contain at least 1 cap, 1 digit & 1 spec char\"\n              // )\n              .min(8)\n              .required(\"required\"),\n          })}\n        >\n\n          {/* <Form>\n            <Formgroup\n              type=\"email\"\n              typeOfInfo=\"LOGIN_email\"\n              title=\"Email\"\n            />\n\n            <Formgroup \n              type=\"password\" \n              typeOfInfo=\"LOGIN_password\" \n              title=\"Password\" \n            />\n\n            <button type=\"submit\">Login</button>\n          </Form> */}\n\n          {props => <LoginForm {...props} />}\n        </Formik>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n    userInfo: state.auth\n})\n\nconst mapDispatchToProps = dispatch => ({\n  getUserInfo : () => dispatch(getUser)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n"]},"metadata":{},"sourceType":"module"}